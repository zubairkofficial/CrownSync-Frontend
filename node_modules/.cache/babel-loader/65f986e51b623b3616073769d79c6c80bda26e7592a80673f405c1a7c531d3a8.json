{"ast":null,"code":"import React from'react';import Sidebar from\"./Components/Sidebar\";import{useParams,useNavigate}from\"react-router-dom\";import{useState,useEffect}from'react';import axios from'axios';import Helpers from\"../../Config/Helpers\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Queryupdate(){const{queryId}=useParams();const[templateDetails,setTemplateDetails]=useState({query:\"\"// Set initial state as an empty string instead of undefined or null\n});const navigate=useNavigate();useEffect(()=>{const fetchTemplateDetails=async()=>{const baseUrl=Helpers.apiUrl;const token=localStorage.getItem(\"token\");try{const response=await axios.get(\"\".concat(baseUrl,\"admin/scop_settings/\").concat(queryId),{headers:{Accept:\"application/json\",\"Content-Type\":\"application/json\",Authorization:\"Bearer \".concat(token)}});const data=response.data.data;console.log(response.data);setTemplateDetails({query:data.query||\"\"});}catch(error){console.error(\"Failed to fetch template details\",error);}};fetchTemplateDetails();},[queryId]);const handleChange=e=>{const{name,value}=e.target;setTemplateDetails(prevState=>({...prevState,[name]:value}));};const handleSubmit=async e=>{e.preventDefault();const baseUrl=Helpers.apiUrl;const token=localStorage.getItem(\"token\");try{const response=await axios.put(\"\".concat(baseUrl,\"admin/scop_settings/\").concat(queryId),templateDetails,{headers:{Accept:\"application/json\",\"Content-Type\":\"application/json\",Authorization:\"Bearer \".concat(token)}});if(response.status===200||response.status===204){Helpers.toast(\"success\",'Query updated successfully');navigate('/admin/queries');// Update with actual path\n}}catch(error){console.error(\"Failed to update template\",error);}};return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"nk-main\",children:[/*#__PURE__*/_jsx(Sidebar,{}),/*#__PURE__*/_jsx(\"div\",{className:\"nk-wrap\",children:/*#__PURE__*/_jsx(\"div\",{class:\"nk-content\",children:/*#__PURE__*/_jsx(\"div\",{class:\"container-xl\",children:/*#__PURE__*/_jsx(\"div\",{class:\"nk-content-inner\",children:/*#__PURE__*/_jsxs(\"div\",{class:\"nk-content-body\",children:[/*#__PURE__*/_jsx(\"div\",{class:\"nk-block-head nk-page-head\",children:/*#__PURE__*/_jsx(\"div\",{class:\"nk-block-head-between\",children:/*#__PURE__*/_jsx(\"div\",{class:\"nk-block-head-content\",children:/*#__PURE__*/_jsx(\"h2\",{class:\"display-6\",children:\"Update Collection\"})})})}),/*#__PURE__*/_jsx(\"form\",{onSubmit:handleSubmit,children:/*#__PURE__*/_jsx(\"div\",{class:\"card shadown-none\",children:/*#__PURE__*/_jsx(\"div\",{class:\"card-body\",children:/*#__PURE__*/_jsxs(\"div\",{class:\"row g-3 gx-gs\",children:[/*#__PURE__*/_jsx(\"div\",{class:\"col-md-6\",children:/*#__PURE__*/_jsxs(\"div\",{class:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{for:\"exampleFormControlInputText2\",class:\"form-label\",children:\"Update Query\"}),/*#__PURE__*/_jsx(\"div\",{class:\"form-control-wrap\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",class:\"form-control\",id:\"exampleFormControlInputText2\",placeholder:\"Enter Name\",name:\"query\",value:templateDetails.query,onChange:handleChange})})]})}),/*#__PURE__*/_jsx(\"div\",{class:\"col-md-6\",children:/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",style:{marginTop:\"2%\"},children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-control-wrap\",children:[\" \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{className:\"btn \",style:{background:\"#3F3EED\",color:\"white\"},type:\"submit\",children:\"Update\"})]})})})]})})})})]})})})})})]})});}export default Queryupdate;","map":{"version":3,"names":["React","Sidebar","useParams","useNavigate","useState","useEffect","axios","Helpers","jsx","_jsx","jsxs","_jsxs","Queryupdate","queryId","templateDetails","setTemplateDetails","query","navigate","fetchTemplateDetails","baseUrl","apiUrl","token","localStorage","getItem","response","get","concat","headers","Accept","Authorization","data","console","log","error","handleChange","e","name","value","target","prevState","handleSubmit","preventDefault","put","status","toast","children","className","class","onSubmit","for","type","id","placeholder","onChange","style","marginTop","background","color"],"sources":["D:/Shahid Zafar/Rolex/frontend-rolex/src/Pages/Admin/Queryupdate.jsx"],"sourcesContent":["import React from 'react'\r\nimport Sidebar from \"./Components/Sidebar\";\r\nimport { useParams,useNavigate  } from \"react-router-dom\";\r\nimport  { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport Helpers from \"../../Config/Helpers\";\r\nfunction Queryupdate() {\r\n    const { queryId } = useParams();\r\n    const [templateDetails, setTemplateDetails] = useState({\r\n        query: \"\", // Set initial state as an empty string instead of undefined or null\r\n      });\r\n    const navigate = useNavigate();\r\n  \r\n    useEffect(() => {\r\n        const fetchTemplateDetails = async () => {\r\n            const baseUrl = Helpers.apiUrl;\r\n            const token = localStorage.getItem(\"token\");\r\n            try {\r\n              const response = await axios.get(`${baseUrl}admin/scop_settings/${queryId}`, {\r\n                headers: {\r\n                  Accept: \"application/json\",\r\n                  \"Content-Type\": \"application/json\",\r\n                  Authorization: `Bearer ${token}`,\r\n                },\r\n              });\r\n              const data = response.data.data;\r\n              console.log(response.data)\r\n              setTemplateDetails({\r\n                query: data.query || \"\",\r\n              });\r\n            } catch (error) {\r\n              console.error(\"Failed to fetch template details\", error);\r\n            }\r\n          };\r\n          \r\n  \r\n      fetchTemplateDetails();\r\n    }, [queryId]);\r\n  \r\n    const handleChange = (e) => {\r\n      const { name, value } = e.target;\r\n      setTemplateDetails((prevState) => ({\r\n        ...prevState,\r\n        [name]: value,\r\n      }));\r\n    };\r\n  \r\n    const handleSubmit = async (e) => {\r\n      e.preventDefault();\r\n      const baseUrl = Helpers.apiUrl;\r\n      const token = localStorage.getItem(\"token\");\r\n      try {\r\n        const response = await axios.put(`${baseUrl}admin/scop_settings/${queryId}`, templateDetails, {\r\n          headers: {\r\n            Accept: \"application/json\",\r\n            \"Content-Type\": \"application/json\",\r\n            Authorization: `Bearer ${token}`,\r\n          },\r\n        });\r\n        if (response.status === 200 || response.status === 204) {\r\n          Helpers.toast(\"success\",'Query updated successfully');\r\n          navigate('/admin/queries'); // Update with actual path\r\n        }\r\n      } catch (error) {\r\n        console.error(\"Failed to update template\", error);\r\n      }\r\n    };\r\n  return (\r\n    <div>\r\n      <div className=\"nk-main\">\r\n        <Sidebar />\r\n        <div className=\"nk-wrap\">\r\n          <div class=\"nk-content\">\r\n            <div class=\"container-xl\">\r\n              <div class=\"nk-content-inner\">\r\n                <div class=\"nk-content-body\">\r\n                  <div class=\"nk-block-head nk-page-head\">\r\n                    <div class=\"nk-block-head-between\">\r\n                      <div class=\"nk-block-head-content\">\r\n                        <h2 class=\"display-6\">Update Collection</h2>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  <form onSubmit={handleSubmit}>\r\n                    <div class=\"card shadown-none\">\r\n                      <div class=\"card-body\">\r\n                        <div class=\"row g-3 gx-gs\">\r\n                          <div class=\"col-md-6\">\r\n                            <div class=\"form-group\">\r\n                              <label\r\n                                for=\"exampleFormControlInputText2\"\r\n                                class=\"form-label\"\r\n                              >\r\n                                Update Query\r\n                              </label>\r\n                              <div class=\"form-control-wrap\">\r\n                                <input\r\n                                  type=\"text\"\r\n                                  class=\"form-control\"\r\n                                  id=\"exampleFormControlInputText2\"\r\n                                  placeholder=\"Enter Name\"\r\n                                  name=\"query\"\r\n                                  value={templateDetails.query}\r\n                                  onChange={handleChange}\r\n                                />\r\n                              </div>\r\n                            </div>\r\n                          </div>\r\n\r\n                          <div class=\"col-md-6\">\r\n                            <div\r\n                              className=\"form-group\"\r\n                              style={{ marginTop: \"2%\" }}\r\n                            >\r\n                              <div className=\"form-control-wrap\"> <br />\r\n                                <button\r\n                                  className=\"btn \" style={{background:\"#3F3EED\",color:\"white\"}}\r\n                                  type=\"submit\"\r\n                                >\r\n                                  Update \r\n                                </button>\r\n                              </div>\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </form>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Queryupdate"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}