{"ast":null,"code":"import React,{useState,useEffect}from'react';import Helpers from'../../Config/Helpers';import Sidebar from'../../Components/Sidebar';import axios from\"axios\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Store=()=>{const[name,setName]=useState('');const[location,setLocation]=useState('');const[locations,setLocations]=useState([]);const[stores,setStores]=useState([]);const handleSubmit=async()=>{if(!name.trim()){Helpers.toast(\"error\",\"Please enter a store name\");return;}const baseUrl=Helpers.apiUrl;const token=localStorage.getItem(\"token\");const response=await fetch(\"\".concat(baseUrl,\"add-store\"),{method:'POST',headers:{Accept:\"application/json\",\"Content-Type\":\"application/json\",Authorization:\"Bearer \".concat(token)},body:JSON.stringify({name})});if(response.status===200){const data=await response.json();console.log(data);Helpers.toast('success',\"Store Saved Successfully!\");setName(\"\");fetchStores();}else{Helpers.toast(\"error\",\"Error saving store. Please try again later.\");}};const fetchStores=async()=>{try{const url=Helpers.apiUrl;const token=localStorage.getItem(\"token\");const response=await axios.get(\"\".concat(url,\"fetch-store\"),{headers:{Accept:\"application/json\",\"Content-Type\":\"application/json\",Authorization:\"Bearer \".concat(token)}});if(response.status===200){const fetchedStores=response.data.data||[];setStores(fetchedStores);Helpers.toast('success',\"Fetch Stores Successfully!\");}else{console.log(\"Received non-200 response:\",response.status);setStores([]);// Set to empty array on error\n}}catch(error){console.error(\"Error fetching location data:\",error);Helpers.toast(\"error\",\"Error saving store. Please try again later.\");setStores([]);// Set to empty array on error\n}};useEffect(()=>{fetchStores();},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"flex h-screen bg-gray-200\",children:[/*#__PURE__*/_jsx(Sidebar,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"container mx-auto my-6 flex flex-col md:flex-row gap-8 p-4 bg-white shadow-lg rounded-lg\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 m-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-3xl font-bold mb-4\",children:\"Create Store\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-2 mb-4\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:name,onChange:e=>setName(e.target.value),placeholder:\"Enter Store Name...\",className:\"flex-1 border border-gray-300 rounded-md px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSubmit,className:\"bg-[#f36b74] !text-white font-bold px-4 py-2 rounded-md hover:bg-[#fa9198] transition-colors\",children:\"Submit\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 m-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-3xl font-bold mb-4\",children:\"Stores List\"}),/*#__PURE__*/_jsxs(\"table\",{className:\"table-auto w-full border border-gray-300\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"bg-blue-100\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"border px-4 py-2\",children:\"#\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border px-4 py-2\",children:\"Store Name\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:stores.length>0?stores.map((store,index)=>/*#__PURE__*/_jsxs(\"tr\",{className:\"hover:bg-gray-100\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"border px-4 py-2\",children:index+1}),/*#__PURE__*/_jsx(\"td\",{className:\"border px-4 py-2\",children:store.name})]},index)):/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{className:\"border px-4 py-2\",colSpan:\"2\",children:\"No stores found.\"})})})]})]})]})]});};export default Store;","map":{"version":3,"names":["React","useState","useEffect","Helpers","Sidebar","axios","jsx","_jsx","jsxs","_jsxs","Store","name","setName","location","setLocation","locations","setLocations","stores","setStores","handleSubmit","trim","toast","baseUrl","apiUrl","token","localStorage","getItem","response","fetch","concat","method","headers","Accept","Authorization","body","JSON","stringify","status","data","json","console","log","fetchStores","url","get","fetchedStores","error","className","children","type","value","onChange","e","target","placeholder","onClick","length","map","store","index","colSpan"],"sources":["D:/Shoaib dev/Rolex/frontend-rolex/src/Pages/User/Store.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport Helpers from '../../Config/Helpers';\r\nimport Sidebar from '../../Components/Sidebar';\r\nimport axios from \"axios\";\r\n\r\nconst Store = () => {\r\n    const [name, setName] = useState('');\r\n    const [location, setLocation] = useState('');\r\n    const [locations, setLocations] = useState([]);\r\n    const [stores, setStores] = useState([]);\r\n\r\n    const handleSubmit = async () => {\r\n        if (!name.trim()) {\r\n            Helpers.toast(\"error\", \"Please enter a store name\");\r\n            return;\r\n        }\r\n        const baseUrl = Helpers.apiUrl;\r\n        const token = localStorage.getItem(\"token\");\r\n        const response = await fetch(`${baseUrl}add-store`, {\r\n            method: 'POST',\r\n            headers: {\r\n                Accept: \"application/json\",\r\n                \"Content-Type\": \"application/json\",\r\n                Authorization: `Bearer ${token}`,\r\n            },\r\n            body: JSON.stringify({ name })\r\n        });\r\n        if (response.status === 200) {\r\n            const data = await response.json();\r\n            console.log(data);\r\n            Helpers.toast('success', \"Store Saved Successfully!\");\r\n            setName(\"\");\r\n            fetchStores(); \r\n        }\r\n        else {\r\n            Helpers.toast(\"error\", \"Error saving store. Please try again later.\");\r\n        }\r\n    };\r\n  \r\n\r\n    const fetchStores = async () => {\r\n        try {\r\n            const url = Helpers.apiUrl;\r\n            const token = localStorage.getItem(\"token\");\r\n            const response = await axios.get(`${url}fetch-store`, {\r\n                headers: {\r\n                    Accept: \"application/json\",\r\n                    \"Content-Type\": \"application/json\",\r\n                    Authorization: `Bearer ${token}`,\r\n                },\r\n            });\r\n\r\n            if (response.status === 200) {\r\n\r\n                const fetchedStores = response.data.data || [];\r\n\r\n             setStores(fetchedStores);\r\n             Helpers.toast('success', \"Fetch Stores Successfully!\");\r\n            } else {\r\n                console.log(\"Received non-200 response:\", response.status);\r\n                setStores([]);  // Set to empty array on error\r\n            }\r\n        } catch (error) {\r\n            console.error(\"Error fetching location data:\", error);\r\n            Helpers.toast(\"error\", \"Error saving store. Please try again later.\");\r\n            setStores([]);  // Set to empty array on error\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        fetchStores();\r\n    }, []);\r\n\r\n\r\n    return (\r\n        <div className=\"flex h-screen bg-gray-200\">\r\n            <Sidebar />\r\n            <div className=\"container mx-auto my-6 flex flex-col md:flex-row gap-8 p-4 bg-white shadow-lg rounded-lg\">\r\n                {/* Form Section */}\r\n                <div className=\"flex-1 m-6\">\r\n                    <h2 className=\"text-3xl font-bold mb-4\">Create Store</h2>\r\n                    <div className=\"flex space-x-2 mb-4\">\r\n                        <input\r\n                            type=\"text\"\r\n                         \r\n                    value={name}\r\n                    onChange={(e) => setName(e.target.value)}\r\n                            placeholder=\"Enter Store Name...\"\r\n                            className=\"flex-1 border border-gray-300 rounded-md px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                        />\r\n                        <button\r\n                            onClick={handleSubmit}\r\n                            className=\"bg-[#f36b74] !text-white font-bold px-4 py-2 rounded-md hover:bg-[#fa9198] transition-colors\"\r\n                        >\r\n                            Submit\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Locations Table Section */}\r\n                <div className=\"flex-1 m-6\">\r\n                    <h2 className=\"text-3xl font-bold mb-4\">Stores List</h2>\r\n                    <table className=\"table-auto w-full border border-gray-300\">\r\n                        <thead>\r\n                            <tr className=\"bg-blue-100\">\r\n                                <th className=\"border px-4 py-2\">#</th>\r\n                                <th className=\"border px-4 py-2\">Store Name</th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            {stores.length > 0 ? (\r\n                                stores.map((store, index) => (\r\n                                    <tr key={index} className=\"hover:bg-gray-100\">\r\n                                        <th className=\"border px-4 py-2\">{index + 1}</th>\r\n                                        <td className=\"border px-4 py-2\">{store.name}</td>\r\n                                    </tr>\r\n                                ))\r\n                            ) : (\r\n                                <tr>\r\n                                    <td className=\"border px-4 py-2\" colSpan=\"2\">\r\n                                        No stores found.\r\n                                    </td>\r\n                                </tr>\r\n                            )}\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Store;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,MAAO,CAAAC,OAAO,KAAM,sBAAsB,CAC1C,MAAO,CAAAC,OAAO,KAAM,0BAA0B,CAC9C,MAAO,CAAAC,KAAK,KAAM,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE1B,KAAM,CAAAC,KAAK,CAAGA,CAAA,GAAM,CAChB,KAAM,CAACC,IAAI,CAAEC,OAAO,CAAC,CAAGX,QAAQ,CAAC,EAAE,CAAC,CACpC,KAAM,CAACY,QAAQ,CAAEC,WAAW,CAAC,CAAGb,QAAQ,CAAC,EAAE,CAAC,CAC5C,KAAM,CAACc,SAAS,CAAEC,YAAY,CAAC,CAAGf,QAAQ,CAAC,EAAE,CAAC,CAC9C,KAAM,CAACgB,MAAM,CAAEC,SAAS,CAAC,CAAGjB,QAAQ,CAAC,EAAE,CAAC,CAExC,KAAM,CAAAkB,YAAY,CAAG,KAAAA,CAAA,GAAY,CAC7B,GAAI,CAACR,IAAI,CAACS,IAAI,CAAC,CAAC,CAAE,CACdjB,OAAO,CAACkB,KAAK,CAAC,OAAO,CAAE,2BAA2B,CAAC,CACnD,OACJ,CACA,KAAM,CAAAC,OAAO,CAAGnB,OAAO,CAACoB,MAAM,CAC9B,KAAM,CAAAC,KAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAC3C,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAC,KAAK,IAAAC,MAAA,CAAIP,OAAO,cAAa,CAChDQ,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CACLC,MAAM,CAAE,kBAAkB,CAC1B,cAAc,CAAE,kBAAkB,CAClCC,aAAa,WAAAJ,MAAA,CAAYL,KAAK,CAClC,CAAC,CACDU,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAC,CAAEzB,IAAK,CAAC,CACjC,CAAC,CAAC,CACF,GAAIgB,QAAQ,CAACU,MAAM,GAAK,GAAG,CAAE,CACzB,KAAM,CAAAC,IAAI,CAAG,KAAM,CAAAX,QAAQ,CAACY,IAAI,CAAC,CAAC,CAClCC,OAAO,CAACC,GAAG,CAACH,IAAI,CAAC,CACjBnC,OAAO,CAACkB,KAAK,CAAC,SAAS,CAAE,2BAA2B,CAAC,CACrDT,OAAO,CAAC,EAAE,CAAC,CACX8B,WAAW,CAAC,CAAC,CACjB,CAAC,IACI,CACDvC,OAAO,CAACkB,KAAK,CAAC,OAAO,CAAE,6CAA6C,CAAC,CACzE,CACJ,CAAC,CAGD,KAAM,CAAAqB,WAAW,CAAG,KAAAA,CAAA,GAAY,CAC5B,GAAI,CACA,KAAM,CAAAC,GAAG,CAAGxC,OAAO,CAACoB,MAAM,CAC1B,KAAM,CAAAC,KAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAC3C,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAtB,KAAK,CAACuC,GAAG,IAAAf,MAAA,CAAIc,GAAG,gBAAe,CAClDZ,OAAO,CAAE,CACLC,MAAM,CAAE,kBAAkB,CAC1B,cAAc,CAAE,kBAAkB,CAClCC,aAAa,WAAAJ,MAAA,CAAYL,KAAK,CAClC,CACJ,CAAC,CAAC,CAEF,GAAIG,QAAQ,CAACU,MAAM,GAAK,GAAG,CAAE,CAEzB,KAAM,CAAAQ,aAAa,CAAGlB,QAAQ,CAACW,IAAI,CAACA,IAAI,EAAI,EAAE,CAEjDpB,SAAS,CAAC2B,aAAa,CAAC,CACxB1C,OAAO,CAACkB,KAAK,CAAC,SAAS,CAAE,4BAA4B,CAAC,CACvD,CAAC,IAAM,CACHmB,OAAO,CAACC,GAAG,CAAC,4BAA4B,CAAEd,QAAQ,CAACU,MAAM,CAAC,CAC1DnB,SAAS,CAAC,EAAE,CAAC,CAAG;AACpB,CACJ,CAAE,MAAO4B,KAAK,CAAE,CACZN,OAAO,CAACM,KAAK,CAAC,+BAA+B,CAAEA,KAAK,CAAC,CACrD3C,OAAO,CAACkB,KAAK,CAAC,OAAO,CAAE,6CAA6C,CAAC,CACrEH,SAAS,CAAC,EAAE,CAAC,CAAG;AACpB,CACJ,CAAC,CAEDhB,SAAS,CAAC,IAAM,CACZwC,WAAW,CAAC,CAAC,CACjB,CAAC,CAAE,EAAE,CAAC,CAGN,mBACIjC,KAAA,QAAKsC,SAAS,CAAC,2BAA2B,CAAAC,QAAA,eACtCzC,IAAA,CAACH,OAAO,GAAE,CAAC,cACXK,KAAA,QAAKsC,SAAS,CAAC,0FAA0F,CAAAC,QAAA,eAErGvC,KAAA,QAAKsC,SAAS,CAAC,YAAY,CAAAC,QAAA,eACvBzC,IAAA,OAAIwC,SAAS,CAAC,yBAAyB,CAAAC,QAAA,CAAC,cAAY,CAAI,CAAC,cACzDvC,KAAA,QAAKsC,SAAS,CAAC,qBAAqB,CAAAC,QAAA,eAChCzC,IAAA,UACI0C,IAAI,CAAC,MAAM,CAEnBC,KAAK,CAAEvC,IAAK,CACZwC,QAAQ,CAAGC,CAAC,EAAKxC,OAAO,CAACwC,CAAC,CAACC,MAAM,CAACH,KAAK,CAAE,CACjCI,WAAW,CAAC,qBAAqB,CACjCP,SAAS,CAAC,wGAAwG,CACrH,CAAC,cACFxC,IAAA,WACIgD,OAAO,CAAEpC,YAAa,CACtB4B,SAAS,CAAC,8FAA8F,CAAAC,QAAA,CAC3G,QAED,CAAQ,CAAC,EACR,CAAC,EACL,CAAC,cAGNvC,KAAA,QAAKsC,SAAS,CAAC,YAAY,CAAAC,QAAA,eACvBzC,IAAA,OAAIwC,SAAS,CAAC,yBAAyB,CAAAC,QAAA,CAAC,aAAW,CAAI,CAAC,cACxDvC,KAAA,UAAOsC,SAAS,CAAC,0CAA0C,CAAAC,QAAA,eACvDzC,IAAA,UAAAyC,QAAA,cACIvC,KAAA,OAAIsC,SAAS,CAAC,aAAa,CAAAC,QAAA,eACvBzC,IAAA,OAAIwC,SAAS,CAAC,kBAAkB,CAAAC,QAAA,CAAC,GAAC,CAAI,CAAC,cACvCzC,IAAA,OAAIwC,SAAS,CAAC,kBAAkB,CAAAC,QAAA,CAAC,YAAU,CAAI,CAAC,EAChD,CAAC,CACF,CAAC,cACRzC,IAAA,UAAAyC,QAAA,CACK/B,MAAM,CAACuC,MAAM,CAAG,CAAC,CACdvC,MAAM,CAACwC,GAAG,CAAC,CAACC,KAAK,CAAEC,KAAK,gBACpBlD,KAAA,OAAgBsC,SAAS,CAAC,mBAAmB,CAAAC,QAAA,eACzCzC,IAAA,OAAIwC,SAAS,CAAC,kBAAkB,CAAAC,QAAA,CAAEW,KAAK,CAAG,CAAC,CAAK,CAAC,cACjDpD,IAAA,OAAIwC,SAAS,CAAC,kBAAkB,CAAAC,QAAA,CAAEU,KAAK,CAAC/C,IAAI,CAAK,CAAC,GAF7CgD,KAGL,CACP,CAAC,cAEFpD,IAAA,OAAAyC,QAAA,cACIzC,IAAA,OAAIwC,SAAS,CAAC,kBAAkB,CAACa,OAAO,CAAC,GAAG,CAAAZ,QAAA,CAAC,kBAE7C,CAAI,CAAC,CACL,CACP,CACE,CAAC,EACL,CAAC,EACP,CAAC,EACL,CAAC,EACL,CAAC,CAEd,CAAC,CAED,cAAe,CAAAtC,KAAK","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}